# Trie 利用ガイド

## 概要

`Trie` は文字列集合に対する前方一致（プレフィックス）操作を高速に行うための木構造です。
本実装は競技プログラミング向けの最小機能版で、単語の挿入・完全一致検索・プレフィックスに一致する単語数の取得を O(L) 時間（L は文字列長）で行えます。

## 特徴

- ハッシュマップベースの素直な実装（子ノードは `HashMap<Character, TrieNode>`）
- ルート直下に子ノードを持つシンプル設計（デフォルトパッケージ、外部依存なし）
- パス上の各ノードに出現回数 `frequency` を保持 → `countPrefix` でプレフィックス件数を取得可能
- メソッドチェーン可能な `insert`（自身を返却）
- スレッドセーフではありません（単一スレッド用途を想定）

## 依存関係

- 標準ライブラリのみ：`java.util.HashMap`, `java.util.Map`
- 他クラスへの依存なし（デフォルトパッケージ）

## 主な機能（メソッド一覧）

### 基本操作

| メソッド                         | 戻り値の型     | 説明                                                 |
 |------------------------------|-----------|----------------------------------------------------|
| `insert(String word)`        | `Trie`    | 単語を挿入し、各ノードの `frequency` をインクリメントします。自身を返すのでチェーン可。 |
| `search(String word)`        | `boolean` | 単語が完全一致で登録済みかを返します。                                |
| `countPrefix(String prefix)` | `int`     | 指定したプレフィックスで始まる登録単語の件数を返します。                       |

[内部] `findLastNode(String key)` は走査ヘルパー（非公開）。

## 利用例

 ```java
 Trie trie = new Trie();
 trie.insert("apple").insert("app").insert("apricot");
 
 boolean hasApp = trie.search("app");           // true
 boolean hasApply = trie.search("apply");       // false
 int cntAp = trie.countPrefix("ap");            // 3 ("app", "apple", "apricot")
 int cntApp = trie.countPrefix("app");          // 2 ("app", "apple")
 ```

## 注意事項

- 全メソッドの引数に `null` は渡さないでください（未チェック、未定義動作）。
- 空文字列は未対応です：
	- `insert("")` は内部実装上 `NullPointerException` を引き起こします。
	- `search("")` は常に `false`、`countPrefix("")` は `0` を返します。
- 大文字小文字の区別や正規化は行いません。必要なら呼び出し側で前処理してください。
- 文字単位は Java の `char`（UTF-16 コードユニット）です。サロゲートペア等の取り扱いに注意してください。
- 競技向け最小実装につき、入力検証やエラー処理は限定的です。

## パフォーマンス特性

- 時間計算量（平均）：
	- `insert`, `search`, `countPrefix` いずれも O(L)（L は文字列長）。
	- 子探索は `HashMap` による平均 O(1) を仮定。
- 空間計算量：O(N)（N は全ノード数、挿入した全単語長の総和に比例）。
- 定数倍はアルファベットサイズや `HashMap` のオーバーヘッドに依存します。

## バージョン情報

| バージョン番号       | 年月日        | 詳細          |
 |:--------------|:-----------|:------------|
| **バージョン 1.0** | 2025-11-18 | 初版作成（ガイド追加） |

### バージョン管理について

- 1桁目（メジャー）: 機能追加・互換性に影響する変更時に更新
- 2桁目（マイナー）: 誤字修正や軽微な更新時に更新