# BIT 利用ガイド

## 概要

1次元・2次元・区間加算の各 BIT 実装をまとめて利用するためのガイドです。
主に `IntBIT` / `LongBIT` / `BIT<T>`を中心に、関連クラスも含めて説明します。

## 特徴

- 0-indexed で統一された API
- `int` / `long` / ジェネリクスの実装を提供
- 区間和や矩形和、区間加算に対応した派生クラスを用意

## 依存関係

- 標準ライブラリ（`java.util.function`）

## 主な機能（メソッド一覧）

### 1. 構築系メソッド

| メソッド                                  | 戻り値の型     | 説明             |
|---------------------------------------|-----------|----------------|
| `IntBIT(int n)`                       | `IntBIT`  | サイズ `n` で初期化   |
| `LongBIT(int n)`                      | `LongBIT` | サイズ `n` で初期化   |
| `BIT(int n, op, inv, identity)`       | `BIT<T>`  | 演算と単位元を指定して初期化 |
| `IntBIT(int n, init)`                 | `IntBIT`  | 初期値関数で構築       |
| `LongBIT(int n, init)`                | `LongBIT` | 初期値関数で構築       |
| `BIT(int n, op, inv, init, identity)` | `BIT<T>`  | 初期値関数で構築       |

### 2. 更新・取得系メソッド

| メソッド             | 戻り値の型        | 説明             |
|------------------|--------------|----------------|
| `apply(i, v)`    | `void`       | 点加算（1次元）       |
| `set(i, v)`      | `void`       | 点更新（1次元）       |
| `get(i)`         | `int/long/T` | 点取得（1次元）       |
| `apply(i, j, v)` | `void`       | 点加算（2次元）       |
| `set(i, j, v)`   | `void`       | 点更新（2次元）       |
| `get(i, j)`      | `int/long`   | 点取得（2次元）       |
| `apply(l, r, v)` | `void`       | 区間加算（RangeBIT） |

### 3. クエリ系メソッド

| メソッド                    | 戻り値の型        | 説明                          |
|-------------------------|--------------|-----------------------------|
| `query(r)`              | `int/long/T` | 閉区間 `[0, r]` の和             |
| `query(l, r)`           | `int/long/T` | 閉区間 `[l, r]` の和             |
| `query(i, j)`           | `int/long`   | 矩形 `[0, i] x [0, j]` の和     |
| `query(i1, j1, i2, j2)` | `int/long`   | 矩形 `[i1, i2] x [j1, j2]` の和 |

## 利用例

```java
IntBIT bit = new IntBIT(5, i -> i + 1); // [1,2,3,4,5]
bit.apply(2, 3); // index 2 に +3
int sum = bit.query(1, 3); // [1,3] の和
```

## 注意事項

- すべてのクラスは 0-indexed を前提にしています。
- `BIT<T>` の区間クエリは逆演算 `inv` が必要です。

## パフォーマンス特性

- 点更新 / 区間和: $O(\log N)$
- 2次元の点更新 / 矩形和: $O(\log H \log W)$
- 区間加算 / 区間和（RangeBIT）: $O(\log N)$

## バージョン情報

| バージョン番号       | 年月日        | 詳細   |
|:--------------|:-----------|:-----|
| **バージョン 1.0** | 2026-02-17 | 初版作成 |

### バージョン管理について

バージョン番号は2桁で管理します：

- 1桁目（メジャーバージョン）: メソッドの追加や機能拡張があった場合に更新
- 2桁目（マイナーバージョン）: 誤字修正、バグ修正、マイクロ高速化などの小さな更新があった場合に更新
