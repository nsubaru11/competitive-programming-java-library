# IntArray2D 利用ガイド

## 概要

IntArray2D は 2 次元 int 配列に対して、O(1) の論理回転（90度単位）や、正方行列に限った論理転置トグルを提供します。
グリッドの回転を多用する問題で、物理的なデータ移動を行わずにインデックス計算のみで高速にアクセスできます。

## 特徴

- O(1) 回転: lRotate()/rRotate() はカウンタのみ更新
- 転置トグル: transpose() は正方行列に限り O(1) でトグル
- 一貫したアクセス: get/set は現在の回転・転置状態を考慮して論理座標から物理位置に変換
- 低コストな反復: 物理配列順の PrimitiveIterator.OfInt を提供

## 依存関係

- 標準ライブラリのみ（java.util.PrimitiveIterator, java.util.function.IntBinaryOperator）

## 主な機能（メソッド一覧）

### 1. 初期化

| メソッド                                               | 戻り値 | 説明                                       |
|----------------------------------------------------|-----|------------------------------------------|
| `IntArray2D(int h, int w, IntBinaryOperator init)` | -   | 高さ h, 幅 w の配列を init.applyAsInt(i,j) で初期化 |

### 2. アクセス/操作（O(1)）

| メソッド                                 | 戻り値 | 説明                            |
|--------------------------------------|-----|-------------------------------|
| `int get(int i, int j)`              | int | 論理座標(i,j)の要素を取得（回転・転置を考慮）     |
| `void set(int i, int j, int v)`      | -   | 論理座標(i,j)に値を設定（回転・転置を考慮）      |
| `void lRotate()`                     | -   | 左回転（90°）                      |
| `void rRotate()`                     | -   | 右回転（90°）                      |
| `void transpose()`                   | -   | 転置トグル（h==w のときのみ有効）           |
| `PrimitiveIterator.OfInt iterator()` | 反復子 | 物理順で全要素を走査（回転・転置状態は無視した内部配列順） |

## 利用例

```java
// 初期化: [[0,1,2],[10,11,12]]
IntArray2D g = new IntArray2D(2, 3, (i, j) -> i * 10 + j);
g.lRotate();
int v00 = g.get(0, 0);
g.set(1, 2, 99);
```

## 注意事項

- transpose() は正方行列に限り有効。長方形では何もしません
- iterator() は物理配列順で要素を返します（回転・転置は反映しません）
- 境界チェックは最小限です。コンテスト用途として不正インデックスは未定義動作

## パフォーマンス特性

| 操作              | 計算量  |
|-----------------|------|
| get/set         | O(1) |
| lRotate/rRotate | O(1) |
| transpose       | O(1) |

## バージョン情報

| バージョン | 年月日        | 詳細                        |
|:------|:-----------|:--------------------------|
| 1.0   | 2025-11-19 | 初版ガイド（IntArray2D）         |
| 1.1   | 2025-11-19 | ガイド微修正（用語統一・注意事項整備・履歴見直し） |

### バージョン管理について

- 1 桁目（メジャー）: 機能追加やAPI変更
- 2 桁目（マイナー）: 誤字修正・軽微な修正